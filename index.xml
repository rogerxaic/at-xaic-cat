<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Roger Miret Gin√©</title><link>https://xaic.cat/</link><description>Recent content on Roger Miret Gin√©</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Wed, 26 May 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://xaic.cat/index.xml" rel="self" type="application/rss+xml"/><item><title>First homelab setup</title><link>https://xaic.cat/blog/first-homelab-setup/</link><pubDate>Wed, 26 May 2021 00:00:00 +0000</pubDate><guid>https://xaic.cat/blog/first-homelab-setup/</guid><description>&lt;img src="https://xaic.cat/blog/first-homelab-setup/thomas-jensen-ISG-rUel0Uw-unsplash.jpg" alt="Featured image of post First homelab setup" />&lt;p>Back in 2014 I bought my first Raspberry Pi. At first it was only meant for tinkering. Homelab-ing, though, is like opening a bag of chips: once you start, you won&amp;rsquo;t be able to stop üòÖ.&lt;/p>
&lt;p>However Raspberry Pies aren&amp;rsquo;t meant for production ‚Äì¬†I often found the RPi had destroyed the SD card, not to mention that back then they were &lt;em>slow&lt;/em>. So I kept my RPi for tinkering and ordered an Ubuntu droplet on DigitalOcean (&lt;a class="link" href="https://m.do.co/c/2cd92a75e89f" target="_blank" rel="noopener"
>use this link to get $100 in credit&lt;/a> ü§ë) for my production side projects and self-hosted apps.&lt;/p>
&lt;p>Having found some problems (and having created new needs), I needed to find a solution to solve these:&lt;/p>
&lt;ul>
&lt;li>Storage&lt;/li>
&lt;li>Compute power&lt;/li>
&lt;li>Doesn&amp;rsquo;t break as often as a Raspberry Pi&lt;/li>
&lt;/ul>
&lt;h2 id="my-first-production-grade-server">My first production-grade server&lt;/h2>
&lt;p>Thanks to the wonders of *advertisement* I bought an &lt;em>HPE ProLiant Microserver Gen8&lt;/em> (Intel Celeron G1610T ‚Äìstill &lt;em>slow&lt;/em> but better than RPi‚Äì, and 4GB DDR3) that I completed with 2 4TB HDDs. This server allows configuring the HDDs with RAID using a built-in feature ‚Äì I preferred to control everything with software (i.e. &lt;a class="link" href="https://wiki.ubuntu.com/ZFS/ZPool" target="_blank" rel="noopener"
>zpool&lt;/a>).&lt;/p>
&lt;h3 id="ilo-integrated-lights-out">iLO ‚Äì¬†Integrated Lights Out&lt;/h3>
&lt;p>iLO is an HPE proprietary server management software that allows controlling a server through HTTP. It&amp;rsquo;s comparable to an ethernet KVM switch: even with the server off the iLO interface will be up and serving a web interface allowing:&lt;/p>
&lt;ul>
&lt;li>Power management (turning on and off)&lt;/li>
&lt;li>Booting from a network ISO (super useful)&lt;/li>
&lt;li>Remote console to the server (the actual KVM part ‚Äì¬†through an old Java applet, it hurts every time)&lt;/li>
&lt;li>Probably other but these are the ones I use&lt;/li>
&lt;/ul>
&lt;p>Since I&amp;rsquo;m, on average, 7 hours away from my home lab, this feature has come to be life-saving!&lt;/p>
&lt;h2 id="my-first-config">My first config&lt;/h2>
&lt;p>The first computer I repaired was thanks to Ubuntu. The first VPS I owned was on Ubuntu. RPis are ubuntu-ish (please don&amp;rsquo;t kill me üòÇ; although you can now &lt;a class="link" href="https://ubuntu.com/download/raspberry-pi" target="_blank" rel="noopener"
>install Ubuntu on them&lt;/a>!). Having been using Ubuntu for some years, it felt natural to use it as the base of my home lab.&lt;/p>
&lt;p>My then ISP was the best you could get, and I&amp;rsquo;m not talking speed-wise (1Gbps symmetric). I discovered by serendipity that, on the router, ports 1-to-3 where switched and NATted but port 4 was &lt;strong>bridged&lt;/strong> to their infrastructure, meaning that I could get 2 public IP addresses: one behind the NAT and one on whatever device was connected on port 4. In reality, had I put a switch on port 4, I could have gotten as many IP addresses as devices plugged onto that switch! Their reasoning behind the bridge port is that since the provided router was extremely feature-limited, they allowed you to use your own router this way.&lt;/p>
&lt;p>On that server ran apps as I&amp;rsquo;d run them on my computer: Plex was installed using a deb, Nextcloud was a VirtualHost on a system-wide installed Apache server and so on and so forth. I&amp;rsquo;d even install GUI applications and use them with &lt;code>ssh -X&lt;/code>! Some might say that&amp;rsquo;s not a good configuration whatsoever, but I couldn&amp;rsquo;t disagree more: tinkering with what are seemingly bad options has taught me enormously.&lt;/p>
&lt;h2 id="my-takeaways">My takeaways&lt;/h2>
&lt;p>I wanted to have a large and safe storage so that I needn&amp;rsquo;t depend on anyone. Some software compilations and runs were too slow with my Raspberry Pi 1. Buying a server, considering how good an internet connection I had, solved all these problems. What I present here is the first config I had, which has since evolved: this is the best thing of my homelab, since it was not planned, I have been able to do lots of learning by changing and improving the different parts of it.&lt;/p>
&lt;p>The most important lessons I learnt are because I used to run a mail server on that server. For some reason, that mail server ran inside a virtual machine. One day, as I was installing updates, I found out that the VM wouldn&amp;rsquo;t turn on anymore. As a matter of fact, those updates included an update for the Linux kernel, which prevented the VM from running. That made me learn how to recompile the kernel modules/headers and (hot)swap them. However, that&amp;rsquo;s not as important as my takeaways:&lt;/p>
&lt;ul>
&lt;li>Test on a staging environment before updating production&lt;/li>
&lt;li>Don&amp;rsquo;t run your own mail server&lt;/li>
&lt;/ul></description></item></channel></rss>